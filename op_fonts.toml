[font]
name = "OpFont"
output_dir = "dist"
copyright = "Copyright 2017 IBM Corp. Portions Copyright 2012-2023 Google LLC. Derivative work by Rick Lan. Licensed under the SIL Open Font License 1.1."
designer = "Rick Lan"
cache_dir = "./cache"
# Optional: override vertical metrics to match another font (e.g. Inter).
# Omit or set to 0 to keep source font's native values.
ascender = 969              # Inter: 2728 / 2816 * 1000
descender = -242            # Inter: -680 / 2816 * 1000
# Optional: scale all glyphs to match a target cap-height ratio.
# Omit or set to 0 to auto-match the first script (base font).
target_cap_ratio = 0.7273   # Inter: capHeight 2048 / UPM 2816

[font.weight_values]
Regular = 400
Medium = 500
SemiBold = 600
Bold = 700

# =============================================================================
# Layer 1: CJK ideographs from official government standard character lists
# SC first, TC fills traditional-only gaps, JA fills remaining via pipeline dedup
# Union: ~6,318 unique CJK ideographs + punctuation/kana/fullwidth ranges
# =============================================================================

# IBM Plex Sans — https://github.com/IBM/plex (OFL 1.1)

# Simplified Chinese: 通用规范汉字表 一级字表 (3,500 chars)
# PRC State Council, 2013 (国发〔2013〕23号)
[[scripts]]
name = "cjk-sc"
font = "IBMPlexSansSC-Regular.otf"
url = "https://raw.githubusercontent.com/IBM/plex/master/packages/plex-sans-sc/fonts/complete/otf/hinted/IBMPlexSansSC-Regular.otf"
charset_file = "charsets/sc_tongyong_l1.txt"
unicode_ranges = [
    "U+3000-303F",   # CJK Symbols and Punctuation
    "U+3200-32FF",   # Enclosed CJK Letters and Months
    "U+FE30-FE4F",   # CJK Compatibility Forms
    "U+FF00-FFEF",   # Halfwidth and Fullwidth Forms
]

# Traditional Chinese: 常用國字標準字體表 (4,808 chars)
# Taiwan Ministry of Education, 1982 (revised 2004)
[[scripts]]
name = "cjk-tc"
font = "IBMPlexSansTC-Regular.otf"
url = "https://raw.githubusercontent.com/IBM/plex/master/packages/plex-sans-tc/fonts/complete/otf/hinted/IBMPlexSansTC-Regular.otf"
charset_file = "charsets/tc_edu_standard_1.txt"
unicode_ranges = [
    "U+3000-303F",   # CJK Symbols and Punctuation
]

# Japanese: 常用漢字 Jōyō Kanji (2,136 chars)
# Japanese Cabinet, 2010 (内閣告示第2号)
[[scripts]]
name = "cjk-ja"
font = "IBMPlexSansJP-Regular.otf"
url = "https://raw.githubusercontent.com/IBM/plex/master/packages/plex-sans-jp/fonts/complete/otf/hinted/IBMPlexSansJP-Regular.otf"
charset_file = "charsets/ja_joyo_kanji.txt"
unicode_ranges = [
    "U+3000-303F",   # CJK Symbols and Punctuation
    "U+3040-309F",   # Hiragana
    "U+30A0-30FF",   # Katakana
    "U+31F0-31FF",   # Katakana Phonetic Extensions
]

# Korean Hangul: KS X 1001 (2,350 syllables from full block of 11,172)
# Korean Agency for Technology and Standards, 1987
[[scripts]]
name = "hangul"
font = "IBMPlexSansKR-Regular.otf"
url = "https://raw.githubusercontent.com/IBM/plex/master/packages/plex-sans-kr/fonts/complete/otf/IBMPlexSansKR-Regular.otf"
charset_file = "charsets/ko_ksx1001_hangul.txt"
unicode_ranges = [
    "U+1100-11FF",   # Hangul Jamo
    "U+3130-318F",   # Hangul Compatibility Jamo
]

# =============================================================================
# Layer 2: Additional scripts not covered by CJK base
# =============================================================================

[[scripts]]
name = "thai"
font = "IBMPlexSansThai-Regular.otf"
url = "https://raw.githubusercontent.com/IBM/plex/master/packages/plex-sans-thai/fonts/complete/otf/IBMPlexSansThai-Regular.otf"
unicode_ranges = [
    "U+0E00-0E7F",   # Thai
]

[[scripts]]
name = "cyrillic"
font = "IBMPlexSans-Regular.otf"
url = "https://raw.githubusercontent.com/IBM/plex/master/packages/plex-sans/fonts/complete/otf/IBMPlexSans-Regular.otf"
unicode_ranges = [
    "U+0400-04FF",   # Cyrillic
    "U+0500-052F",   # Cyrillic Supplement
]

# =============================================================================
# Layer 3: Latin, Symbols
# =============================================================================

[[scripts]]
name = "latin"
font = "IBMPlexSans-Regular.otf"
url = "https://raw.githubusercontent.com/IBM/plex/master/packages/plex-sans/fonts/complete/otf/IBMPlexSans-Regular.otf"
unicode_ranges = [
    "U+0000-007F",   # Basic Latin
    "U+0080-00FF",   # Latin-1 Supplement
    "U+0100-024F",   # Latin Extended-A/B
    "U+0250-02AF",   # IPA Extensions
    "U+1E00-1EFF",   # Latin Extended Additional (Vietnamese)
    "U+2000-206F",   # General Punctuation
    "U+2070-209F",   # Superscripts and Subscripts
    "U+20A0-20CF",   # Currency Symbols
    "U+2100-214F",   # Letterlike Symbols
    "U+2150-218F",   # Number Forms
    "U+FB00-FB06",   # Alphabetic Presentation Forms (ligatures)
]

# Noto Sans Symbols — https://github.com/notofonts/notofonts.github.io (OFL 1.1)

# Symbol fonts have cap-height ratios unrelated to text (e.g. 0.945 for Symbols2),
# so scaling them to match a text font's cap ratio would distort the glyphs.
[[scripts]]
name = "symbols"
scale = false
weights = ["Regular"]
font = "NotoSansSymbols-Regular.ttf"
url = "https://raw.githubusercontent.com/notofonts/notofonts.github.io/main/fonts/NotoSansSymbols/hinted/ttf/NotoSansSymbols-Regular.ttf"
unicode_ranges = [
    "U+2190-21FF",   # Arrows
    "U+2200-22FF",   # Mathematical Operators
    "U+2300-23FF",   # Miscellaneous Technical
    "U+25A0-25FF",   # Geometric Shapes
    "U+2600-26FF",   # Miscellaneous Symbols
    "U+2700-27BF",   # Dingbats (includes ✓ U+2713)
    "U+2B00-2BFF",   # Miscellaneous Symbols and Arrows
    "U+FFF0-FFFD",   # Specials (replacement char)
]

[[scripts]]
name = "symbols2"
scale = false
weights = ["Regular"]
font = "NotoSansSymbols2-Regular.ttf"
url = "https://raw.githubusercontent.com/notofonts/notofonts.github.io/main/fonts/NotoSansSymbols2/hinted/ttf/NotoSansSymbols2-Regular.ttf"
unicode_ranges = [
    "U+2190-21FF",   # Arrows
    "U+2200-22FF",   # Mathematical Operators
    "U+2300-23FF",   # Miscellaneous Technical
    "U+25A0-25FF",   # Geometric Shapes
    "U+2600-26FF",   # Miscellaneous Symbols
    "U+2700-27BF",   # Dingbats (includes ✓ U+2713)
    "U+2B00-2BFF",   # Miscellaneous Symbols and Arrows
    "U+FFF0-FFFD",   # Specials (replacement char)
]

[merge]
drop_tables = ["MATH", "meta", "vhea", "vmtx"]
# Only keep essential layout features. Everything else (stylistic alternates,
# CJK variant forms, vertical writing, width alternates) is dropped along with
# ~2000 unreferenced alternate glyphs they pull in.
keep_features = [
    "ccmp",  # glyph composition/decomposition (correct accent rendering)
    "locl",  # localized forms (e.g. Serbian vs Russian Cyrillic)
    "liga",  # standard ligatures (fi, fl)
    "calt",  # contextual alternates
]
